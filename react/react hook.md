# Hook

Hook은 리액트 16.8에 도입된 기능으로 기존의 class 컴포넌트를 작성하지않고 컴포넌트의 상태태관리나 자식요소에 접근할 수 있게 해줍니다.  

# useState
상태값을 컴포넌트에서 사용할 수 있게 해주는 훅

```javascript
function App() {
    const [count, setCount] = useState(0);

    function onClick() {
        setCount(count + 1);
        setCount(count + 1);
        console.log(count);
    };
    console.log("render call");

    return (
        <>
            <div>
                {count}
            </div>
            <button onClick={onClick}>증가</button>
        </>
    )
}
```


대표적인 2가지 훅이 있음
useState: 상태값 추가
useEffect: 부수효과를 처리할떄 사용

- 부수효과: 외부의 상태를 변경하는것(서버 API 호출, 이벤트 핸들러 등록)

상태값 변경함수는 비동기이면서 배치로 처리되어 두번 처리되지 않음( 글 변경해야함)

리액트는 효율적으로 랜더링하기위해서 여러개의 상태값 변경을 배치로 처리하여 onclick함수가 호출되어도 console.log는 한번만 출력될거고

상태값변경을 비동기로 처리하면서 배치로처리할까?

- 동기로 처리하면 하나의 상태값 변경함수가 호출될때마다 화면을 다시그려서 성능 이슈가 생길 수 있음.
- 동기로 처리하고 매번 안그리면 데이터와 ui화면간의 차이가있어서 헷갈릴 수 있음

상태값 변경함수에 함수를 입력하면 처리직전에 상태값을 매개변수로 받아서 원하는데로 동작을 함

이벤트 핸들러를 따로 등록해서 사용하는경우는 리액트 내부에서 관리되지않아서 배치로 처리되지 않는다.

상태값 변경 함수는 호출한 순서대로 적용이 된다.

# useEffect

컴포넌트 렌더링중 부수효과를 발생시키는것은 복잡도를 크게 증가시킴

사용법

- 첫번째 매개변수로 함수를 입력하면 함수는 컴포넌트가 렌더링된 후에 호출됨
  (렌더링 결과가 실제 돔에 반영되고 비동기로 호출됨)

만약? 렌더링이 자주변경되면? -> 그떄마다 api를 호출하는것은 비효율적

- 이경우 두번째 매개변수에 배열(의존성배열)을 전달하여 그 값이 변경될 떄만 부수효과함수가 실행됨.

# 커스텀 훅 만들기

리액트가 제공하는 훅을 이용해서 커스텀 훅을 만들 수 있음

네이밍규칙은 use로 시작하는게 좋음

# 훅 사용시 지켜야할 규칙

1. 하나의 컴포넌트에서 훅을 호출하는 순서는 항상 같아야한다.

   - if문안에서 사용하면안됨
   - 함수아넹서 훅을 호출해도안됨(함수가 호출안될수도 있기 떄문)

2. 훅은 함수형 컴포넌트 또는 커스텀 훅 안에서만 호출되어야한다.

[react doc](https://ko.reactjs.org/docs/jsx-in-depth.html)
